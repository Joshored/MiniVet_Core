<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox spacing="0" style="-fx-background-color: #f5f5f5;" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.loginapp.FacturacionController">

    <!-- Header -->
    <HBox alignment="CENTER" spacing="15" style="-fx-background-color: #f2a1ae;">
        <padding>
            <Insets bottom="20" left="30" right="30" top="20" />
        </padding>
        <children>
            <Label text="FacturaciÃ³n y Ventas" textFill="WHITE" HBox.hgrow="ALWAYS">
                <font>
                    <Font name="Noto Sans Condensed Bold" size="27.0" />
                </font>
            </Label>

            <TextField fx:id="busquedaFacturas" promptText="ðŸ” Buscar factura..." prefWidth="280" style="-fx-background-color: white; -fx-prompt-text-fill: #999;">
                <font>
                    <Font size="16.0" />
                </font>
            </TextField>
        </children>
    </HBox>

    <!-- Filtros y estadÃ­sticas -->
    <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-background-color: #e899a8;">
        <padding>
            <Insets bottom="12" left="30" right="30" top="12" />
        </padding>
        <children>
            <Label text="Filtrar:" textFill="WHITE">
                <font>
                    <Font name="Noto Sans Condensed Bold" size="16.0" />
                </font>
            </Label>

            <VBox spacing="2">
                <Label text="PerÃ­odo" textFill="WHITE" style="-fx-font-size: 13px;" />
                <ComboBox fx:id="filtroPeriodo" promptText="Este mes" prefWidth="130" style="-fx-background-color: white; -fx-font-size: 15px;" />
            </VBox>

            <VBox spacing="2">
                <Label text="Desde" textFill="WHITE" style="-fx-font-size: 13px;" />
                <DatePicker fx:id="filtroDesde" prefWidth="140" style="-fx-background-color: white; -fx-font-size: 15px;" />
            </VBox>

            <VBox spacing="2">
                <Label text="Hasta" textFill="WHITE" style="-fx-font-size: 13px;" />
                <DatePicker fx:id="filtroHasta" prefWidth="140" style="-fx-background-color: white; -fx-font-size: 15px;" />
            </VBox>

            <Region HBox.hgrow="ALWAYS" />

            <!-- EstadÃ­sticas del dÃ­a -->
            <VBox alignment="CENTER" spacing="3" style="-fx-background-color: #c45a7d; -fx-padding: 10 18; -fx-background-radius: 5;">
                <Label text="Ventas Hoy" textFill="WHITE" style="-fx-font-size: 13px;" />
                <Label fx:id="lblVentasHoy" text="0.00" textFill="WHITE">
                    <font>
                        <Font name="Noto Sans Condensed Bold" size="19.0" />
                    </font>
                </Label>
            </VBox>

            <VBox alignment="CENTER" spacing="3" style="-fx-background-color: #9f2d5b; -fx-padding: 10 18; -fx-background-radius: 5;">
                <Label text="Total Mes" textFill="WHITE" style="-fx-font-size: 13px;" />
                <Label fx:id="lblTotalMes" text="0.00" textFill="WHITE">
                    <font>
                        <Font name="Noto Sans Condensed Bold" size="19.0" />
                    </font>
                </Label>
            </VBox>
        </children>
    </HBox>

    <!-- Tabla de facturas -->
    <TableView fx:id="tablaFacturas" style="-fx-background-color: white;" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="columnaFolio" text="Folio" minWidth="80" prefWidth="90" />
            <TableColumn fx:id="columnaFecha" text="Fecha" minWidth="100" prefWidth="120" />
            <TableColumn fx:id="columnaHora" text="Hora" minWidth="70" prefWidth="80" />
            <TableColumn fx:id="columnaCliente" text="Cliente" minWidth="150" prefWidth="180" />
            <TableColumn fx:id="columnaProductos" text="Productos" minWidth="80" prefWidth="100" />
            <TableColumn fx:id="columnaSubtotal" text="Subtotal" minWidth="100" prefWidth="110" />
            <TableColumn fx:id="columnaDescuento" text="Descuento" minWidth="90" prefWidth="100" />
            <TableColumn fx:id="columnaTotal" text="Total" minWidth="100" prefWidth="110" />
            <TableColumn fx:id="columnaMetodoPago" text="MÃ©todo Pago" minWidth="120" prefWidth="130" />
            <TableColumn fx:id="columnaEstado" text="Estado" minWidth="90" prefWidth="100" />
        </columns>
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
        </columnResizePolicy>
    </TableView>

    <!-- Botones de acciÃ³n -->
    <HBox alignment="CENTER" spacing="15" style="-fx-background-color: #f6cbd6;">
        <padding>
            <Insets bottom="15" left="30" right="30" top="15" />
        </padding>
        <children>
            <Region HBox.hgrow="ALWAYS" />

            <Button text="Nueva Venta" onAction="#nuevaVenta" prefWidth="150" style="-fx-background-color: #9f2d5b; -fx-text-fill: white; -fx-font-size: 17; -fx-font-weight: bold;" />

            <Button text="Ver Detalle" onAction="#verDetalle" prefWidth="130" style="-fx-background-color: #9f2d5b; -fx-text-fill: white; -fx-font-size: 16;" />

            <Button text="Imprimir Ticket" onAction="#imprimirTicket" prefWidth="150" style="-fx-background-color: #c45a7d; -fx-text-fill: white; -fx-font-size: 16;" />

            <Button text="Reporte" onAction="#generarReporte" prefWidth="120" style="-fx-background-color: #c45a7d; -fx-text-fill: white; -fx-font-size: 16;" />

            <Button text="Cancelar Venta" onAction="#cancelarVenta" prefWidth="140" style="-fx-background-color: #e27e8d; -fx-text-fill: white; -fx-font-size: 16;" />

            <Region HBox.hgrow="ALWAYS" />
        </children>
    </HBox>

</VBox>